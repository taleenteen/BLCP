<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Integrity Report | BLCP</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- Flatpickr CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <link rel="stylesheet" href="../../css/style.css" />
    <style>
      /* Custom datepicker styles */
      .flatpickr-calendar {
        z-index: 9999 !important;
      }

      .date-input-wrapper {
        position: relative;
      }

      .calendar-icon {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 18px;
        z-index: 5;
        pointer-events: none;
        user-select: none;
      }

      .date-input-with-icon {
        padding-left: 45px !important;
      }

      .clear-date-btn {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        font-size: 18px;
        color: #6c757d;
        cursor: pointer;
        z-index: 5;
      }

      .clear-date-btn:hover {
        color: #dc3545;
      }

      input::placeholder {
        padding: 15px !important;
        color: rgba(181, 181, 181, 1) !important;
      }

      textarea::placeholder {
        padding: 15px !important;
        color: rgba(181, 181, 181, 1) !important;
      }

      /* Form styling */
      .form-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .form-control:focus {
        border-color: #0066b3;
        box-shadow: 0 0 0 0.2rem rgba(0, 102, 179, 0.25);
      }

      .btn-submit {
        background: rgba(190, 216, 78, 1);
        border: none;
        border-radius: 50px;
        padding: 20px 40px;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .btn-submit:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 102, 179, 0.3);
      }
    </style>
  </head>
  <body>
    <div class="d-flex">
      <!-- Sidebar Container -->
      <div id="sidebar-container"></div>

      <div class="flex-grow-1">
        <!-- Navbar Container -->
        <div id="navbar-container"></div>

        <!-- Main content below navbar -->
        <main class="container-fluid p-0">
          <div id="hero-banner-container"></div>

          <section class="blue-linear-bg-convert d-flex justify-content-center">
            <div
              class="d-flex flex-column align-items-center justify-content-center gap-3 container-fluid mb-5 p-5"
            >
              <p class="text-white f-size-40 text-center p-3">
                Complaints about Staff Work Performance
                <br class="d-none d-md-block" />Actions that Constitute
                Corruption or May Indicate Corruption
              </p>

              <div class="container">
                <div class="p-4 p-md-5">
                  <form id="complaintForm" class="needs-validation" novalidate>
                    <div class="row g-4">
                      <!-- Left Column -->
                      <div class="col-md-6">
                        <!-- Field 1: Full Name -->
                        <div class="mb-3">
                          <label
                            for="fullName"
                            class="form-label text-white f-size-24"
                          >
                            Full Name :
                          </label>
                          <input
                            type="text"
                            class="form-control input-field f-size-20"
                            id="fullName"
                            name="fullName"
                            placeholder="Please enter your full name"
                            required
                          />
                          <div class="invalid-feedback">
                            Please enter your full name
                          </div>
                        </div>

                        <!-- Field 4: Email -->
                        <div class="mb-3">
                          <label
                            for="email"
                            class="form-label text-white f-size-24"
                          >
                            Email :
                          </label>
                          <input
                            type="email"
                            class="form-control input-field f-size-20"
                            id="email"
                            name="email"
                            placeholder="Please enter your email"
                          />
                          <div class="invalid-feedback">
                            Please enter a valid email address
                          </div>
                        </div>

                        <!-- Field 6: Complaint Type -->
                        <div class="mb-3">
                          <label
                            for="complaintType"
                            class="form-label text-white f-size-24"
                          >
                            Complaint Category
                          </label>
                          <select
                            class="form-select input-field f-size-20 px-4 py-2"
                            id="complaintType"
                            name="complaintType"
                            required
                          >
                            <option value="">
                              Please select complaint category
                            </option>
                            <option value="environmental">Environmental</option>
                            <option value="noise">Noise Disturbance</option>
                            <option value="dust">Dust Pollution</option>
                            <option value="safety">Safety</option>
                            <option value="community">Community Impact</option>
                            <option value="other">Others</option>
                          </select>
                          <div class="invalid-feedback">
                            Please select a complaint category
                          </div>
                        </div>
                      </div>

                      <!-- Right Column -->
                      <div class="col-md-6">
                        <!-- Field 2: Phone Number -->
                        <div class="mb-3">
                          <label
                            for="phoneNumber"
                            class="form-label text-white f-size-24"
                          >
                            Phone Number :
                          </label>
                          <input
                            type="tel"
                            class="form-control input-field f-size-20"
                            id="phoneNumber"
                            name="phoneNumber"
                            placeholder="Please enter your phone number"
                            pattern="[0-9]{10}"
                            required
                          />
                          <div class="invalid-feedback">
                            Please enter a valid phone number (10 digits)
                          </div>
                        </div>

                        <!-- Field 5: Address -->
                        <div class="mb-3">
                          <label
                            for="address"
                            class="form-label text-white f-size-24"
                          >
                            Current Address :
                          </label>
                          <input
                            type="text"
                            class="form-control input-field f-size-20"
                            id="address"
                            name="address"
                            placeholder="Please enter your current address"
                            required
                          />
                          <div class="invalid-feedback">
                            Please enter your address
                          </div>
                        </div>

                        <!-- Field 3: Complaint Date -->
                        <div class="mb-3">
                          <label
                            for="complaintDate"
                            class="form-label text-white f-size-24"
                          >
                            Date :
                          </label>
                          <div class="date-input-wrapper">
                            <span class="calendar-icon">ðŸ“…</span>
                            <input
                              type="text"
                              class="form-control input-field f-size-20 date-input-with-icon"
                              id="complaintDate"
                              name="complaintDate"
                              placeholder="Select date"
                              readonly
                              required
                            />
                            <button
                              type="button"
                              class="clear-date-btn"
                              onclick="clearDate('complaintDate')"
                              style="display: none"
                            >
                              <i class="bi bi-x-circle"></i>
                            </button>
                          </div>
                          <div class="invalid-feedback">
                            Please select the incident date
                          </div>
                        </div>
                      </div>

                      <!-- Full Width Fields -->
                      <div class="col-12">
                        <!-- Text Area: Complaint Details -->
                        <div class="mb-3">
                          <label
                            for="complaintDetails"
                            class="form-label text-white f-size-24"
                          >
                            Complaint Details :
                          </label>
                          <textarea
                            class="form-control input-field f-size-20"
                            id="complaintDetails"
                            name="complaintDetails"
                            rows="8"
                            placeholder="Please provide detailed information about your complaint"
                            required
                          ></textarea>
                          <div class="invalid-feedback">
                            Please provide complaint details
                          </div>
                        </div>
                      </div>

                      <!-- 2nd Left Column -->
                      <div class="col-md-6">
                        <!-- Field 1: Full Name -->
                        <div class="mb-3">
                          <label
                            for="reportName"
                            class="form-label text-white f-size-24"
                          >
                            Reporter Name :
                          </label>
                          <input
                            type="text"
                            class="form-control input-field f-size-20"
                            id="reportName"
                            name="reportName"
                            placeholder="Please enter reporter's full name"
                            required
                          />
                          <div class="invalid-feedback">
                            Please enter reporter's full name
                          </div>
                        </div>

                        <!-- Field 3: Report Date -->
                        <div class="mb-3">
                          <label
                            for="reportDate"
                            class="form-label text-white f-size-24"
                          >
                            Report Date :
                          </label>
                          <div class="date-input-wrapper">
                            <span class="calendar-icon">ðŸ“…</span>
                            <input
                              type="text"
                              class="form-control input-field f-size-20 date-input-with-icon"
                              id="reportDate"
                              name="reportDate"
                              placeholder="Select date"
                              readonly
                              required
                            />
                            <button
                              type="button"
                              class="clear-date-btn"
                              onclick="clearDate('reportDate')"
                              style="display: none"
                            >
                              <i class="bi bi-x-circle"></i>
                            </button>
                          </div>
                          <div class="invalid-feedback">
                            Please select the report date
                          </div>
                        </div>
                      </div>

                      <!-- 2nd Right Column -->
                      <div class="col-md-6">
                        <!-- Field 1: BLCP Relationship -->
                        <div class="mb-3">
                          <label
                            for="blcpRelationship"
                            class="form-label text-white f-size-24"
                          >
                            Relationship with BLCP :
                          </label>
                          <input
                            type="text"
                            class="form-control input-field f-size-20"
                            id="blcpRelationship"
                            name="blcpRelationship"
                            placeholder="Please provide information"
                            required
                          />
                          <div class="invalid-feedback">
                            Please provide information
                          </div>
                        </div>

                        <!-- Field 3: Location -->
                        <div class="mb-3">
                          <label
                            for="location"
                            class="form-label text-white f-size-24"
                          >
                            Location :
                          </label>
                          <input
                            type="text"
                            class="form-control input-field f-size-20"
                            id="location"
                            name="location"
                            placeholder="Please enter location"
                            required
                          />
                          <div class="invalid-feedback">
                            Please enter location
                          </div>
                        </div>
                      </div>

                      <div class="col-12">
                        <!-- File Upload -->
                        <div class="d-flex flex-column mb-4">
                          <label class="form-label text-white f-size-24">
                            Attachments ( pdf , docx , jpg ) :
                          </label>

                          <input
                            type="file"
                            class="form-control"
                            id="attachments"
                            name="attachments"
                            multiple
                            accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                            style="display: none"
                          />

                          <label
                            for="attachments"
                            class="btn btn-light d-flex justify-content-center align-items-center gap-2 f-size-16 p-2"
                            style="
                              max-width: 127px;
                              color: rgba(139, 139, 139, 1);
                              border-radius: 15px;
                              box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
                            "
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="16"
                              height="16"
                              fill="currentColor"
                              class="bi bi-upload"
                              viewBox="0 0 16 16"
                            >
                              <path
                                d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"
                              />
                              <path
                                d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"
                              />
                            </svg>
                            Upload Files
                          </label>

                          <div id="fileList" class="mt-3"></div>
                        </div>

                        <!-- Privacy Notice -->
                        <div class="mb-4">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              id="privacyConsent"
                              name="privacyConsent"
                              required
                            />
                            <label
                              class="form-check-label text-white f-size-16"
                              for="privacyConsent"
                            >
                              I consent to the collection, use, and disclosure
                              of my personal data in accordance with the
                              <a
                                href="privacy-policy-en.html"
                                class="text-light"
                                >Privacy Policy</a
                              >
                            </label>
                            <div class="invalid-feedback">
                              Please consent to the privacy policy
                            </div>
                          </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center">
                          <button
                            type="submit"
                            class="btn btn-submit text-dark f-size-20"
                          >
                            Submit Report
                          </button>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </section>
        </main>

        <!-- Footer Container -->
        <div id="footer-container"></div>
      </div>
    </div>

    <!-- Scripts -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <script>
      // Initialize components
      fetch("../components/navbar.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("navbar-container").innerHTML = data;
        });

      fetch("../components/sidebar.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("sidebar-container").innerHTML = data;
        });

      fetch("../components/footer.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("footer-container").innerHTML = data;
        });

      // Hero banner with breadcrumb
      const heroBannerHTML = `
        <section class="hero-banner-bg d-flex justify-content-center">
          <div class="container d-flex justify-content-center">
            <div class="hero-content d-flex flex-column justify-content-center align-items-center text-center text-white py-5">
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb justify-content-center">
                  <li class="breadcrumb-item">
                    <a href="../index-en.html" class="text-white text-decoration-none">Home</a>
                  </li>
                  <li class="breadcrumb-item">
                    <a href="#" class="text-white text-decoration-none">Contact</a>
                  </li>
                  <li class="breadcrumb-item active text-white" aria-current="page">
                    Integrity Report
                  </li>
                </ol>
              </nav>
              <h1 class="hero-title display-4 fw-bold mb-3">Integrity Report</h1>
              <p class="hero-subtitle lead">
                Report corruption or unethical behavior
              </p>
            </div>
          </div>
        </section>
      `;

      document.getElementById("hero-banner-container").innerHTML =
        heroBannerHTML;

      // Initialize date pickers
      flatpickr("#complaintDate", {
        dateFormat: "d/m/Y",
        locale: "en",
        onChange: function (selectedDates, dateStr, instance) {
          const clearBtn =
            instance.input.parentNode.querySelector(".clear-date-btn");
          if (dateStr) {
            clearBtn.style.display = "block";
          } else {
            clearBtn.style.display = "none";
          }
        },
      });

      flatpickr("#reportDate", {
        dateFormat: "d/m/Y",
        locale: "en",
        onChange: function (selectedDates, dateStr, instance) {
          const clearBtn =
            instance.input.parentNode.querySelector(".clear-date-btn");
          if (dateStr) {
            clearBtn.style.display = "block";
          } else {
            clearBtn.style.display = "none";
          }
        },
      });

      // Clear date function
      function clearDate(inputId) {
        const input = document.getElementById(inputId);
        input._flatpickr.clear();
        const clearBtn = input.parentNode.querySelector(".clear-date-btn");
        clearBtn.style.display = "none";
      }

      // File upload handling
      document
        .getElementById("attachments")
        .addEventListener("change", function (e) {
          const fileList = document.getElementById("fileList");
          fileList.innerHTML = "";

          if (e.target.files.length > 0) {
            const fileContainer = document.createElement("div");
            fileContainer.className = "mt-2";

            for (let i = 0; i < e.target.files.length; i++) {
              const file = e.target.files[i];
              const fileItem = document.createElement("div");
              fileItem.className =
                "d-flex justify-content-between align-items-center bg-light p-2 mb-2 rounded";
              fileItem.innerHTML = `
              <span class="text-dark">${file.name}</span>
              <button type="button" class="btn btn-sm btn-danger" onclick="removeFile(${i})">
                <i class="bi bi-x"></i>
              </button>
            `;
              fileContainer.appendChild(fileItem);
            }

            fileList.appendChild(fileContainer);
          }
        });

      // Remove file function
      function removeFile(index) {
        const input = document.getElementById("attachments");
        const dt = new DataTransfer();
        const files = input.files;

        for (let i = 0; i < files.length; i++) {
          if (i !== index) {
            dt.items.add(files[i]);
          }
        }

        input.files = dt.files;
        input.dispatchEvent(new Event("change"));
      }

      // Form validation and submission
      document
        .getElementById("complaintForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          if (this.checkValidity()) {
            // Show success message
            alert(
              "Your integrity report has been submitted successfully. Thank you for your report."
            );

            // Reset form
            this.reset();
            document.getElementById("fileList").innerHTML = "";

            // Hide clear date buttons
            document.querySelectorAll(".clear-date-btn").forEach((btn) => {
              btn.style.display = "none";
            });
          }

          this.classList.add("was-validated");
        });
    </script>
  </body>
</html>
