<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>การประชุมไตรภาคี | BLCP</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- Flatpickr CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <link rel="stylesheet" href="../../css/style.css" />
    <style>
      /* Custom datepicker styles */
      .flatpickr-calendar {
        z-index: 9999 !important;
      }

      .date-input-wrapper {
        position: relative;
      }

      .calendar-icon {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 18px;
        z-index: 5;
        pointer-events: none;
        user-select: none;
      }

      .date-input-with-icon {
        padding-left: 45px !important;
      }

      .clear-date-btn {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        font-size: 18px;
        color: #6c757d;
        cursor: pointer;
        z-index: 5;
      }

      .clear-date-btn:hover {
        color: #dc3545;
      }

      input::placeholder {
        padding: 15px !important;
        color: rgba(181, 181, 181, 1) !important;
      }

      textarea::placeholder {
        padding: 15px !important;
        color: rgba(181, 181, 181, 1) !important;
      }

      /* Form styling */
      .form-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .form-control:focus {
        border-color: #0066b3;
        box-shadow: 0 0 0 0.2rem rgba(0, 102, 179, 0.25);
      }

      .btn-submit {
        background: rgba(190, 216, 78, 1);
        border: none;
        border-radius: 50px;
        padding: 20px 40px;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .btn-submit:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 102, 179, 0.3);
      }
    </style>
  </head>
  <body>
    <div class="d-flex">
      <!-- Sidebar Container -->
      <div id="sidebar-container"></div>

      <div class="flex-grow-1">
        <!-- Navbar Container -->
        <div id="navbar-container"></div>

        <!-- Main content below navbar -->
        <main class="container-fluid p-0">
          <div id="hero-banner-container"></div>

          <section class="blue-linear-bg-convert d-flex justify-content-center">
            <div
              class="d-flex flex-column align-items-center justify-content-center gap-3 container-fluid mb-5 p-5"
            >
              <p class="text-white f-size-40 text-center p-3">
                ร้องเรียนอันเนื่องมาจากการดำเนินงานของโรงไฟฟ้า
                <br class="d-none d-md-block" />ที่ส่งผลกระทบต่อชุมชน
                สิ่งแวดล้อม หรือผู้มีส่วนได้เสีย
              </p>

              <div class="container">
                <div class="p-4 p-md-5">
                  <form id="complaintForm" class="needs-validation" novalidate>
                    <div class="row g-4">
                      <!-- Left Column -->
                      <div class="col-md-6">
                        <!-- Field 1: Full Name -->
                        <div class="mb-3">
                          <label
                            for="fullName"
                            class="form-label text-white f-size-24"
                          >
                            ชื่อ นามสกุล :
                          </label>
                          <input
                            type="text"
                            class="form-control input-field f-size-20"
                            id="fullName"
                            name="fullName"
                            placeholder="กรุณากรอกชื่อ-นามสกุล"
                            required
                          />
                          <div class="invalid-feedback">
                            กรุณากรอกชื่อ-นามสกุล
                          </div>
                        </div>

                        <!-- Field 4: Email -->
                        <div class="mb-3">
                          <label
                            for="email"
                            class="form-label text-white f-size-24"
                          >
                            อีเมล :
                          </label>
                          <input
                            type="email"
                            class="form-control input-field f-size-20"
                            id="email"
                            name="email"
                            placeholder="โปรดกรอกอีเมล"
                          />
                          <div class="invalid-feedback">
                            โปรดกรอกอีเมลให้ถูกต้อง
                          </div>
                        </div>

                        <!-- Field 6: Complaint Type -->
                        <div class="mb-3">
                          <label
                            for="complaintType"
                            class="form-label text-white f-size-24"
                          >
                            ประเภทการร้องเรียน
                          </label>
                          <select
                            class="form-select input-field f-size-20 px-4 py-2"
                            id="complaintType"
                            name="complaintType"
                            required
                          >
                            <option value="">
                              โปรดเลือกหัวข้อการร้องเรียน
                            </option>
                            <option value="environmental">สิ่งแวดล้อม</option>
                            <option value="noise">เสียงรบกวน</option>
                            <option value="dust">ฝุ่นละออง</option>
                            <option value="safety">ความปลอดภัย</option>
                            <option value="community">ผลกระทบต่อชุมชน</option>
                            <option value="other">อื่นๆ</option>
                          </select>
                          <div class="invalid-feedback">
                            กรุณาเลือกประเภทการร้องเรียน
                          </div>
                        </div>
                      </div>

                      <!-- Right Column -->
                      <div class="col-md-6">
                        <!-- Field 2: Phone Number -->
                        <div class="mb-3">
                          <label
                            for="phoneNumber"
                            class="form-label text-white f-size-24"
                          >
                            เบอร์โทรศัพท์ :
                          </label>
                          <input
                            type="tel"
                            class="form-control input-field f-size-20"
                            id="phoneNumber"
                            name="phoneNumber"
                            placeholder="โปรดกรอกเบอร์โทรศัพท์"
                            pattern="[0-9]{10}"
                            required
                          />
                          <div class="invalid-feedback">
                            โปรดกรอกเบอร์โทรศัพท์ให้ถูกต้อง (10 หลัก)
                          </div>
                        </div>

                        <!-- Field 5: Address -->
                        <div class="mb-3">
                          <label
                            for="address"
                            class="form-label text-white f-size-24"
                          >
                            ที่อยู่ปัจจุบัน :
                          </label>
                          <input
                            type="text"
                            class="form-control input-field f-size-20"
                            id="address"
                            name="address"
                            placeholder="โปรดกรอกที่อยู่ปัจจุบัน"
                            required
                          />
                          <div class="invalid-feedback">โปรดกรอกที่อยู่</div>
                        </div>

                        <!-- Field 3: Complaint Date -->
                        <div class="mb-3">
                          <label
                            for="complaintDate"
                            class="form-label text-white f-size-24"
                          >
                            วัน เดือน ปี :
                          </label>
                          <div class="date-input-wrapper">
                            <span class="calendar-icon">📅</span>
                            <input
                              type="text"
                              class="form-control input-field f-size-20 date-input-with-icon"
                              id="complaintDate"
                              name="complaintDate"
                              placeholder="เลือกจากวันที่"
                              readonly
                              required
                            />
                            <button
                              type="button"
                              class="clear-date-btn"
                              onclick="clearDate('complaintDate')"
                              style="display: none"
                            >
                              <i class="bi bi-x-circle"></i>
                            </button>
                          </div>
                          <div class="invalid-feedback">
                            กรุณาเลือกวันที่เกิดเหตุ
                          </div>
                        </div>
                      </div>

                      <!-- Full Width Fields -->
                      <div class="col-12">
                        <!-- Text Area: Complaint Details -->
                        <div class="mb-3">
                          <label
                            for="complaintDetails"
                            class="form-label text-white f-size-24"
                          >
                            รายละเอียดการร้องเรียน :
                          </label>
                          <textarea
                            class="form-control input-field f-size-20"
                            id="complaintDetails"
                            name="complaintDetails"
                            rows="8"
                            placeholder="โปรดกรอกรายละเอียดให้การร้องเรียน"
                            required
                          ></textarea>
                          <div class="invalid-feedback">
                            กรุณากรอกรายละเอียดการร้องเรียน
                          </div>
                        </div>

                        <!-- File Upload -->
                        <div class="d-flex flex-column mb-4">
                          <label class="form-label text-white f-size-24">
                            เอกสารแนบ ( pdf , docx , jpg ) :
                          </label>

                          <input
                            type="file"
                            class="form-control"
                            id="attachments"
                            name="attachments"
                            multiple
                            accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                            style="display: none"
                          />

                          <label
                            for="attachments"
                            class="btn btn-light d-flex justify-content-center align-items-center gap-2 f-size-16 p-2"
                            style="
                              max-width: 127px;
                              color: rgba(139, 139, 139, 1);
                              border-radius: 15px;
                              box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
                            "
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="16"
                              height="16"
                              fill="currentColor"
                              class="bi bi-upload"
                              viewBox="0 0 16 16"
                            >
                              <path
                                d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"
                              />
                              <path
                                d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"
                              />
                            </svg>
                            Upload File
                          </label>

                          <div
                            id="file-list"
                            class="form-text text-white mt-2"
                          ></div>
                        </div>

                        <!-- Privacy Notice -->
                        <div class="mb-4">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              id="privacyConsent"
                              name="privacyConsent"
                              required
                            />
                            <label
                              class="form-check-label f-size-24 text-white"
                              for="privacyConsent"
                            >
                              ข้าพเจ้าได้อ่านและยินยอมตามนโยบายความเป็นส่วนตัว
                              (Privacy Notice) * Required
                            </label>
                            <div class="invalid-feedback">
                              กรุณายินยอมข้อตกลงการใช้ข้อมูลส่วนบุคคล
                            </div>
                          </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center">
                          <button
                            type="submit"
                            class="btn-submit text-white f-size-24"
                          >
                            ส่งข้อมูล
                          </button>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </section>
        </main>

        <!-- Footer Container -->
        <div id="footer-container"></div>
      </div>
    </div>

    <!-- Flatpickr JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/th.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
      crossorigin="anonymous"
    ></script>
    <script src="../assets/js/components.js"></script>
    <script src="../assets/js/script.js"></script>
    <script src="../assets/js/table.js"></script>
    <script src="../assets/js/banner.js"></script>

    <script>
      const fileInput = document.getElementById("attachments");
      const fileList = document.getElementById("file-list");

      fileInput.addEventListener("change", () => {
        fileList.innerHTML = "";

        if (fileInput.files.length > 0) {
          const fileNames = Array.from(fileInput.files)
            .map((file) => file.name)
            .join(", ");
          fileList.textContent = "ไฟล์ที่เลือก: " + fileNames;
        }
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        createHeroBanner("hero-banner-container", {
          title: "ร้องเรียนการดำเนินงานทั่วไป",
          basePath: "..",
        });

        // Initialize Flatpickr for date picker
        flatpickr("#complaintDate", {
          locale: "th",
          dateFormat: "d/m/Y",
          maxDate: "today",
          onChange: function (selectedDates, dateStr, instance) {
            const clearBtn = document.querySelector(
              "#complaintDate + .clear-date-btn"
            );
            const calendarIcon = document.querySelector(".calendar-icon");

            if (dateStr) {
              clearBtn.style.display = "block";
              calendarIcon.style.display = "none";
            } else {
              clearBtn.style.display = "none";
              calendarIcon.style.display = "block";
            }
          },
        });

        // Form validation and submission
        const form = document.getElementById("complaintForm");

        form.addEventListener("submit", function (e) {
          e.preventDefault();

          if (!form.checkValidity()) {
            e.stopPropagation();
          } else {
            // Process form submission
            handleFormSubmission();
          }

          form.classList.add("was-validated");
        });

        // File size validation
        document
          .getElementById("attachments")
          .addEventListener("change", function (e) {
            const files = e.target.files;
            const maxSize = 10 * 1024 * 1024; // 10MB

            for (let file of files) {
              if (file.size > maxSize) {
                alert(`ไฟล์ "${file.name}" มีขนาดใหญ่เกิน 10MB`);
                e.target.value = "";
                break;
              }
            }
          });
      });

      function clearDate(inputId) {
        const input = document.getElementById(inputId);
        const clearBtn = input.nextElementSibling;
        const calendarIcon = document.querySelector(".calendar-icon");

        input.value = "";
        clearBtn.style.display = "none";
        calendarIcon.style.display = "block";

        // Clear flatpickr instance
        if (input._flatpickr) {
          input._flatpickr.clear();
        }
      }

      function handleFormSubmission() {
        // Show loading state
        const submitBtn = document.querySelector(".btn-submit");
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML =
          '<i class="bi bi-hourglass-split me-2"></i>กำลังส่ง...';
        submitBtn.disabled = true;

        // Simulate form submission
        setTimeout(() => {
          alert(
            "ส่งการร้องเรียนเรียบร้อยแล้ว เราจะติดต่อกลับภายใน 3-5 วันทำการ"
          );

          // Reset form
          document.getElementById("complaintForm").reset();
          document
            .getElementById("complaintForm")
            .classList.remove("was-validated");

          // Reset button
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;

          // Reset date picker icons
          document.querySelector(".clear-date-btn").style.display = "none";
          document.querySelector(".calendar-icon").style.display = "block";
        }, 2000);
      }
    </script>
  </body>
</html>
