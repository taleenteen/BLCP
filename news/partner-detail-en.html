<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="page-title">Partner Organization Details | BLCP</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <div class="d-flex">
      <!-- Sidebar Container -->
      <div id="sidebar-container"></div>

      <div class="flex-grow-1">
        <!-- Navbar Container -->
        <div id="navbar-container"></div>

        <!-- Main content -->
        <main class="container-fluid p-0">
          <!-- Hero Section -->
          <section>
            <div class="card border-0 text-white">
              <img
                src="../assets/aboutus/aboutus-hero.png"
                alt="partner hero"
              />
              <div
                class="card-img-overlay d-flex justify-content-between align-items-center"
              >
                <div class="text-center w-100">
                  <h1 id="partner-title" class="card-title mb-3">
                    Partner Organization Details
                  </h1>
                  <span
                    id="partner-category"
                    class="badge bg-primary fs-6 px-3 py-2 rounded-pill"
                    >Partner Organizations</span
                  >
                </div>
                <div class="d-flex justify-content-end">
                  <div class="card rounded-pill">
                    <div
                      class="card-body d-flex flex-column justify-content-center gap-2 p-2"
                    >
                      <img
                        src="../assets/logo/Facebook.png"
                        alt="Facebook logo"
                      />
                      <img src="../assets/logo/Line.png" alt="Line logo" />
                      <img src="../assets/logo/Tiktok.png" alt="Tiktok logo" />
                      <img
                        src="../assets/logo/YouTube.png"
                        alt="YouTube logo"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Content Section -->
          <section class="py-5">
            <div class="container">
              <div class="row justify-content-center">
                <div class="col-lg-8">
                  <!-- Partner Image -->
                  <div class="text-center mb-4">
                    <img
                      id="partner-image"
                      src=""
                      alt="Partner Image"
                      class="img-fluid rounded-3 shadow-sm"
                      style="max-height: 400px; width: 100%; object-fit: cover"
                    />
                  </div>

                  <!-- Partner Date -->
                  <div class="text-muted text-center mb-4">
                    <i class="bi bi-calendar3"></i>
                    <span id="partner-date">Date</span>
                  </div>

                  <!-- Partner Content -->
                  <div id="partner-content" class="content-section">
                    <!-- Dynamic content will be inserted here -->
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Divider -->
          <hr
            class="my-5 mx-auto"
            style="width: 80%; border-top: 2px solid #007bff"
          />

          <!-- Related Partners Section -->
          <section class="py-5 bg-light">
            <div class="container">
              <h2 class="text-center mb-5">Other Related Organizations</h2>
              <div id="related-partners-container" class="row">
                <!-- Related partners will be inserted here -->
              </div>
            </div>
          </section>
        </main>

        <!-- Footer Container -->
        <div id="footer-container"></div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
      crossorigin="anonymous"
    ></script>
    <script src="../assets/js/components.js"></script>
    <script src="../assets/js/script.js"></script>
    <script src="../assets/js/card.js"></script>

    <script>
      // Complete partner organization data (same as in partner-organizations-en.html)
      const partnerData = [
        {
          id: 1,
          title: "Community Friends",
          image: "../assets/news/news-partner-1.png",
          category: "Community",
          date: "2024-03-15",
          content: [
            "Building good relationships with surrounding communities is at the heart of BLCP Power Company Limited's business operations, as we firmly believe that sustainable growth must occur together with communities and the environment.",
            "The Company has established the 'Community Friends' project to create cooperation and improve the quality of life for people in the area through various activities such as supporting education, career development, and environmental care.",
            "The results of this cooperation have created good understanding between the Company and the community, creating sustainable development that benefits all parties in the long term.",
          ],
        },
        {
          id: 2,
          title: "Electricity Generating Public Company Limited",
          image: "../assets/news/news-partner-2.png",
          category: "Partner Organizations",
          date: "2024-03-10",
          content: [
            "Electricity Generating Public Company Limited (EGCO) is one of the important partners of BLCP Power Company Limited in developing and operating efficient and environmentally friendly power plants.",
            "Cooperation between the two companies covers technology sharing, human resource development, and sustainable environmental management to ensure electricity generation meets international standards.",
            "This collaboration helps strengthen Thailand's energy security and serves as a model for businesses that are responsible to society and the environment.",
          ],
        },
        {
          id: 3,
          title: "Banpu Power Public Company Limited",
          image: "../assets/news/news-partner-3.png",
          category: "Partner Organizations",
          date: "2024-03-05",
          content: [
            "Banpu Power Public Company Limited is the main partner in co-investing and operating the BLCP power plant, bringing expertise and experience in the energy industry to support operations.",
            "The strong cooperation between the two companies enables efficient operations from electricity generation, maintenance, to developing new technologies.",
            "This collaboration not only creates business value but also emphasizes environmentally friendly operations and social responsibility for sustainable development.",
          ],
        },
        {
          id: 4,
          title: "Rayong City Municipality",
          image: "../assets/news/news-partner-4.png",
          category: "Government Agencies",
          date: "2024-02-28",
          content: [
            "Rayong City Municipality is a local government agency that plays an important role in caring for and developing the quality of life for people in the area. The Company has cooperated with the municipality on many projects.",
            "Cooperation covers infrastructure development, education promotion, environmental care, and support for various social activities that benefit the community.",
            "This close collaboration helps the Company respond to community needs precisely and create sustainable development in Rayong Province.",
          ],
        },
        {
          id: 5,
          title: "Map Ta Phut City Municipality",
          image: "../assets/news/news-partner-5.png",
          category: "Government Agencies",
          date: "2024-02-25",
          content: [
            "Map Ta Phut City Municipality is an important local agency in caring for and developing industrial areas and communities in Rayong Province. The Company has close cooperation in many aspects.",
            "Cooperation projects between the Company and Map Ta Phut Municipality include environmental management, human resource development, and support for various public benefit activities.",
            "This cooperation helps create balance between industrial development and caring for people's quality of life to achieve sustainable growth in the area.",
          ],
        },
        {
          id: 6,
          title: "Electricity Generating Authority of Thailand",
          image: "../assets/news/news-partner-6.png",
          category: "Government Agencies",
          date: "2024-02-20",
          content: [
            "The Electricity Generating Authority of Thailand (EGAT) is the main agency for purchasing electricity from the BLCP power plant under a long-term power purchase agreement for distribution to consumers nationwide.",
            "Cooperation between the Company and EGAT is not only electricity trading but also includes sharing knowledge in technology, developing production efficiency, and environmental management.",
            "This collaboration helps strengthen Thailand's electrical system security and is an important part of developing Thailand as the energy hub of the region.",
          ],
        },
        {
          id: 7,
          title: "Ministry of Industry",
          image: "../assets/news/news-partner-7.png",
          category: "Government Agencies",
          date: "2024-02-15",
          content: [
            "The Ministry of Industry is the main agency for supervising and promoting industrial operations in Thailand, including the electricity generation industry.",
            "The Company receives support and guidance from the Ministry of Industry in technology development, environmental management, and upgrading production standards to align with government policies.",
            "This cooperation helps the Company operate efficiently according to international standards and be part of driving the country's economy.",
          ],
        },
        {
          id: 8,
          title: "Ministry of Energy",
          image: "../assets/news/news-partner-8.png",
          category: "Government Agencies",
          date: "2024-02-10",
          content: [
            "The Ministry of Energy is the main agency for setting policies and directions for Thailand's energy development. The Company receives support and works together on many projects.",
            "Cooperation covers clean energy development, improving energy use efficiency, and reducing environmental impact to align with the country's Net Zero policy.",
            "This collaboration is an important part of driving Thailand towards becoming the clean energy hub of the region and strengthening long-term energy security.",
          ],
        },
      ];

      // Function to convert URL parameters
      function getUrlParameter(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        const regex = new RegExp("[\\?&]" + name + "=([^&#]*)");
        const results = regex.exec(location.search);
        return results === null
          ? ""
          : decodeURIComponent(results[1].replace(/\+/g, " "));
      }

      // Function to format date in English
      function formatEnglishDate(dateString) {
        const date = new Date(dateString);
        const options = {
          year: "numeric",
          month: "long",
          day: "numeric",
          timeZone: "Asia/Bangkok",
        };
        return date.toLocaleDateString("en-US", options);
      }

      // Function to create content paragraphs
      function createContentParagraphs(contentArray) {
        return contentArray
          .map(
            (paragraph) =>
              `<p class="fs-5 lh-lg text-justify mb-4">${paragraph}</p>`
          )
          .join("");
      }

      // Function to load partner organization details
      function loadPartnerDetail() {
        const partnerId = parseInt(getUrlParameter("id"));

        if (!partnerId) {
          // If no ID, redirect to partner-organizations page
          window.location.href = "partner-organizations-en.html";
          return;
        }

        // Find partner that matches the ID
        const partner = partnerData.find((item) => item.id === partnerId);

        if (!partner) {
          // If partner not found, show error message
          document.getElementById("partner-title").textContent =
            "Organization Not Found";
          document.getElementById("partner-content").innerHTML =
            '<p class="text-center text-muted">The organization you are looking for may have been removed or moved</p>';
          return;
        }

        // Update page information
        document.getElementById(
          "page-title"
        ).textContent = `${partner.title} | BLCP`;
        document.getElementById("partner-title").textContent = partner.title;
        document.getElementById("partner-category").textContent =
          partner.category || "Partner Organizations";
        document.getElementById("partner-image").src = partner.image;
        document.getElementById("partner-image").alt = partner.title;

        // Show date if available
        if (partner.date) {
          document.getElementById("partner-date").textContent =
            formatEnglishDate(partner.date);
        } else {
          document.getElementById("partner-date").parentElement.style.display =
            "none";
        }

        // Show content
        if (partner.content && partner.content.length > 0) {
          document.getElementById("partner-content").innerHTML =
            createContentParagraphs(partner.content);
        } else {
          document.getElementById("partner-content").innerHTML =
            '<p class="text-muted">No detailed content available</p>';
        }

        // Load related partners
        loadRelatedPartners(partner);
      }

      // Function to load related partners
      function loadRelatedPartners(currentPartner) {
        // Find partners in the same category (excluding current one)
        let relatedPartners = partnerData
          .filter(
            (item) =>
              item.category === currentPartner.category &&
              item.id !== currentPartner.id &&
              item.content &&
              item.content.length > 0 // has full content
          )
          .slice(0, 3); // show maximum 3 items

        if (relatedPartners.length === 0) {
          // If no partners in same category, show latest partners
          relatedPartners = partnerData
            .filter(
              (item) =>
                item.id !== currentPartner.id &&
                item.content &&
                item.content.length > 0
            )
            .slice(0, 3);
        }

        const container = document.getElementById("related-partners-container");

        if (relatedPartners.length === 0) {
          container.innerHTML =
            '<div class="col-12 text-center"><p class="text-muted">No related organizations</p></div>';
          return;
        }

        container.innerHTML = relatedPartners
          .map(
            (item) => `
          <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm border-0 partner-card" style="cursor: pointer;" onclick="goToPartner(${
              item.id
            })">
              <img src="${item.image}" class="card-img-top" alt="${
              item.title
            }" style="height: 200px; object-fit: cover;" />
              <div class="card-body d-flex flex-column">
                <h5 class="card-title">${item.title}</h5>
                ${
                  item.date
                    ? `<small class="text-muted mb-2"><i class="bi bi-calendar3"></i> ${formatEnglishDate(
                        item.date
                      )}</small>`
                    : ""
                }
                ${
                  item.category
                    ? `<span class="badge bg-primary align-self-start mt-auto">${item.category}</span>`
                    : ""
                }
              </div>
            </div>
          </div>
        `
          )
          .join("");
      }

      // Function to navigate to another partner
      function goToPartner(partnerId) {
        window.location.href = `partner-detail-en.html?id=${partnerId}`;
      }

      // Initialize loading data when page is ready
      document.addEventListener("DOMContentLoaded", function () {
        loadPartnerDetail();
      });
    </script>
  </body>
</html>
